@using ACC.ViewModels.IssueCommentVM
@model List<IssueCommentVM>
@{
    ViewData["Title"] = "Issue Comments";
}
<h2>Comments</h2>
<a asp-controller="ProjectIssue"
   asp-action="Index"
   asp-route-id="@ViewBag.ProjectId"
   class="btn btn-secondary mb-3">
    ← Back to Issues
</a>

<form asp-action="AddComment" method="post">
    <input type="hidden" name="issueId" value="@ViewBag.IssueId" />
    <div class="mb-2">
        <textarea name="content" class="form-control" placeholder="Write your comment..."></textarea>
    </div>
    <button type="submit" class="btn btn-primary">Post</button>
</form>

<hr />
@foreach (var comment in Model)
{
    <div class="mb-3">
        <strong>@comment.AuthorName</strong> <small class="text-muted">@comment.CreatedAt.ToString("g")</small>
        <p>@comment.Content</p>
    </div>
}